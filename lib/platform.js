/*!
 * Platform.js v1.0.0 <http://mths.be/platform>
 * Copyright 2010-2013 John-David Dalton <http://allyoucanleet.com/>
 * Available under MIT license <http://mths.be/mit>
 */
(function(f){var p=f;var c=typeof exports=="object"&&exports;var n=typeof global=="object"&&global&&(global==global.global?(f=global):global);var k=/Opera/;var q=Object.prototype.toString;var l=/Java/.test(w(f.java))&&f.java;var B=l&&w(f.environment)=="Environment";var b=l?"a":"\u03b1";var x=l?"b":"\u03b2";var A=f.document||{};var h={}.hasOwnProperty;var e=f.navigator||{};var u=f.operamini||f.opera;var j=k.test(j=w(u))?j:(u=null);var d=this;var y=e.userAgent||"";function g(C){C=String(C);return C.charAt(0).toUpperCase()+C.slice(1)}function a(D,F){var C=-1,E=D.length;if(E==E>>>0){while(++C<E){F(D[C],C,D)}}else{v(D,F)}}function t(C){C=s(C);return/^(?:webOS|i(?:OS|P))/.test(C)?C:g(C)}function v(C,E){for(var D in C){z(C,D)&&E(C[D],D,C)}}function w(C){return C==null?g(C):q.call(C).slice(8,-1)}function z(){z=function(C,D){var E=C!=null&&(C.constructor||Object).prototype;return !!E&&D in Object(C)&&!(D in E&&C[D]===E[D])};if(w(h)=="Function"){z=function(C,D){return C!=null&&h.call(C,D)}}else{if({}.__proto__==Object.prototype){z=function(D,E){var C=false;if(D!=null){D=Object(D);D.__proto__=[D.__proto__,D.__proto__=null,C=E in D][0]}return C}}}return z.apply(this,arguments)}function o(C,E){var D=C!=null?typeof C[E]:"number";return !/^(?:boolean|number|string|undefined)$/.test(D)&&(D=="object"?!!C[E]:true)}function r(C){return String(C).replace(/([ -])(?!$)/g,"$1?")}function i(E,D){var C=null;a(E,function(G,F){C=D(C,G,F,E)});return C}function s(C){return String(C).replace(/^ +| +$/g,"")}function m(K){K||(K=y);var T;var U=K;var J=[];var F=null;var L=K==y;var D=L&&u&&typeof u.version=="function"&&u.version();var P=M([{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","Trident","KHTML","Gecko"]);var V=I(["Adobe AIR","Arora","Avant Browser","Camino","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","Iron","K-Meleon","Konqueror","Lunascape","Maxthon","Midori","Nook Browser","PhantomJS","Raven","Rekonq","RockMelt","SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser","Sunrise","Swiftfox","WebPositive","Opera Mini","Opera","Chrome",{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"IE",pattern:"MSIE"},"Safari"]);var C=N(["BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},"Google TV","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nook","PlayBook","PlayStation Vita","TouchPad","Transformer","Xoom"]);var S=H({Apple:{iPad:1,iPhone:1,iPod:1},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1},HP:{TouchPad:1},LG:{},Motorola:{Xoom:1},Nokia:{},Samsung:{"Galaxy S":1,"Galaxy S2":1},Sony:{"PlayStation Vita":1}});var E=Q(["Android","CentOS","Debian","Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "]);function M(W){return i(W,function(X,Y){return X||RegExp("\\b"+(Y.pattern||r(Y))+"\\b","i").exec(K)&&(Y.label||Y)})}function H(W){return i(W,function(X,Z,Y){return X||(Z[C]||Z[0,/^[a-z]+(?: +[a-z]+\b)*/i.exec(C)]||RegExp("\\b"+(Y.pattern||r(Y))+"(?:\\b|\\w*\\d)","i").exec(K))&&(Y.label||Y)})}function I(W){return i(W,function(X,Y){return X||RegExp("\\b"+(Y.pattern||r(Y))+"\\b","i").exec(K)&&(Y.label||Y)})}function Q(W){return i(W,function(X,Z){var Y=Z.pattern||r(Z);if(!X&&(X=RegExp("\\b"+Y+"(?:/[\\d.]+|[ \\w.]*)","i").exec(K))){T={"6.2":"8","6.1":"Server 2008 R2 / 7","6.0":"Server 2008 / Vista","5.2":"Server 2003 / XP 64-bit","5.1":"XP","5.01":"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};if(/^Win/i.test(X)&&(T=T[0,/[\d.]+$/.exec(X)])){X="Windows "+T}X=t(String(X).replace(RegExp(Y,"i"),Z.label||Z).replace(/ ce$/i," CE").replace(/hpw/i,"web").replace(/Macintosh/,"Mac OS").replace(/_PowerPC/i," OS").replace(/(OS X) [^ \d]+/i,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/x86\.64/gi,"x86_64").split(" on ")[0])}return X})}function N(W){return i(W,function(X,Z){var Y=Z.pattern||r(Z);if(!X&&(X=RegExp("\\b"+Y+" *\\d+[.\\w_]*","i").exec(K)||RegExp("\\b"+Y+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(K))){if((X=String(Z.label||X).split("/"))[1]&&!/[\d.]+/.test(X[0])){X[0]+=" "+X[1]}Z=Z.label||Z;X=t(X[0].replace(RegExp(Y,"i"),Z).replace(RegExp("; *(?:"+Z+"[_-])?","i")," ").replace(RegExp("("+Z+")(\\w)","i"),"$1 $2"))}return X})}function G(W){return i(W,function(X,Y){return X||(RegExp(Y+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(K)||0)[1]||null})}function R(){return this.description||""}P&&(P=[P]);if(S&&!C){C=N([S])}if((T=/Google TV/.exec(C))){C=T[0]}if(/\bSimulator\b/i.test(K)){C=(C?C+" ":"")+"Simulator"}if(/^iP/.test(C)){V||(V="Safari");E="iOS"+((T=/ OS ([\d_]+)/i.exec(K))?" "+T[1].replace(/_/g,"."):"")}else{if(V=="Konqueror"&&!/buntu/i.test(E)){E="Kubuntu"}else{if(S&&S!="Google"&&/Chrome|Vita/.test(V+";"+C)){V="Android Browser";E=/Android/.test(E)?E:"Android"}else{if(!V||(T=!/\bMinefield\b/i.test(K)&&/Firefox|Safari/.exec(V))){if(V&&!C&&/[\/,]|^[^(]+?\)/.test(K.slice(K.indexOf(T+"/")+8))){V=null}if((T=C||S||E)&&(C||S||/Android|Symbian OS|Tablet OS|webOS/.test(E))){V=/[a-z]+(?: Hat)?/i.exec(/Android/.test(E)?E:T)+" Browser"}}}}}if(!D){D=G(["(?:Cloud9|CriOS|CrMo|Opera ?Mini|Raven|Silk(?!/[\\d.]+$))","Version",r(V),"(?:Firefox|Minefield|NetFront)"])}if(P=="iCab"&&parseFloat(D)>3){P=["WebKit"]}else{if((T=/Opera/.test(V)&&"Presto"||/\b(?:Midori|Nook|Safari)\b/i.test(K)&&"WebKit"||!P&&/\bMSIE\b/i.test(K)&&(/^Mac/.test(E)?"Tasman":"Trident"))){P=[T]}}if(L){if(o(f,"global")){if(l){T=l.lang.System;U=T.getProperty("os.arch");E=E||T.getProperty("os.name")+" "+T.getProperty("os.version")}if(c){if(d==p&&typeof system=="object"&&(T=[system])[0]){E||(E=T[0].os||null);try{T[1]=require("ringo/engine").version;D=T[1].join(".");V="RingoJS"}catch(O){if(T[0].global==n){V="Narwhal"}}}else{if(typeof process=="object"&&(T=process)){V="Node.js";U=T.arch;E=T.platform;D=/[\d.]+/.exec(T.version)[0]}else{if(B){V="Rhino"}}}}else{if(B){V="Rhino"}}}else{if(w((T=f.runtime))=="ScriptBridgingProxyObject"){V="Adobe AIR";E=T.flash.system.Capabilities.os}else{if(w((T=f.phantom))=="RuntimeObject"){V="PhantomJS";D=(T=T.version||null)&&(T.major+"."+T.minor+"."+T.patch)}else{if(typeof A.documentMode=="number"&&(T=/\bTrident\/(\d+)/i.exec(K))){D=[D,A.documentMode];if((T=+T[1]+4)!=D[1]){J.push("IE "+D[1]+" mode");P[1]="";D[1]=T}D=V=="IE"?String(D[1].toFixed(1)):D[0]}}}}E=E&&t(E)}if(D&&(T=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(D)||/(?:alpha|beta)(?: ?\d)?/i.exec(K+";"+(L&&e.appMinorVersion))||/\bMinefield\b/i.test(K)&&"a")){F=/b/i.test(T)?"beta":"alpha";D=D.replace(RegExp(T+"\\+?$"),"")+(F=="beta"?x:b)+(/\d+\+?/.exec(T)||"")}if(V=="Fennec"){V="Firefox Mobile"}else{if(V=="Maxthon"&&D){D=D.replace(/\.[\d.]+/,".x")}else{if(V=="Silk"){if(!/Mobi/i.test(K)){E="Android";J.unshift("desktop mode")}if(/Accelerated *= *true/i.test(K)){J.unshift("accelerated")}}else{if(V=="IE"&&(T=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(K)||0)[1])){V+=" Mobile";E="Windows Phone OS "+T+".x";J.unshift("desktop mode")}else{if((V=="IE"||V&&!C&&!/Browser|Mobi/.test(V))&&(E=="Windows CE"||/Mobi/i.test(K))){V+=" Mobile"}else{if(V=="IE"&&L&&typeof external=="object"&&!external){J.unshift("platform preview")}else{if(/BlackBerry/.test(C)&&(T=(RegExp(C.replace(/ +/g," *")+"/([.\\d]+)","i").exec(K)||0)[1]||D)){E="Device Software "+T;D=null}else{if(this!=v&&((L&&u)||(/Opera/.test(V)&&/\b(?:MSIE|Firefox)\b/i.test(K))||(V=="Firefox"&&/OS X (?:\d+\.){2,}/.test(E))||(V=="IE"&&((E&&!/^Win/.test(E)&&D>5.5)||/Windows XP/.test(E)&&D>8||D==8&&!/Trident/.test(K))))&&!k.test((T=m.call(v,K.replace(k,"")+";")))&&T.name){T="ing as "+T.name+((T=T.version)?" "+T:"");if(k.test(V)){if(/IE/.test(T)&&E=="Mac OS"){E=null}T="identify"+T}else{T="mask"+T;if(j){V=t(j.replace(/([a-z])([A-Z])/g,"$1 $2"))}else{V="Opera"}if(/IE/.test(T)){E=null}if(!L){D=null}}P=["Presto"];J.push(T)}}}}}}}}if((T=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(K)||0)[1])){T=[parseFloat(T.replace(/\.(\d)$/,".0$1")),T];if(V=="Safari"&&T[1].slice(-1)=="+"){V="WebKit Nightly";F="alpha";D=T[1].slice(0,-1)}else{if(D==T[1]||D==(/\bSafari\/([\d.]+\+?)/i.exec(K)||0)[1]){D=null}}T=[T[0],(/\bChrome\/([\d.]+)/i.exec(K)||0)[1]];if(!L||(/internal|\n/i.test(q.toString())&&!T[1])){P[1]="like Safari";T=(T=T[0],T<400?1:T<500?2:T<526?3:T<533?4:T<534?"4+":T<535?5:"5")}else{P[1]="like Chrome";T=T[1]||(T=T[0],T<530?1:T<532?2:T<532.05?3:T<533?4:T<534.03?5:T<534.07?6:T<534.1?7:T<534.13?8:T<534.16?9:T<534.24?10:T<534.3?11:T<535.01?12:T<535.02?"13+":T<535.07?15:T<535.11?16:T<535.19?17:T<536.05?18:T<536.1?19:T<537.01?20:"21")}P[1]+=" "+(T+=typeof T=="number"?".x":/[.+]/.test(T)?"":"+");if(V=="Safari"&&(!D||parseInt(D)>45)){D=T}}if(V=="Opera"&&(T=/(?:zbov|zvav)$/.exec(E))){V+=" ";J.unshift("desktop mode");if(T=="zvav"){V+="Mini";D=null}else{V+="Mobile"}}else{if(V=="Safari"&&/Chrome/.exec(P[1])){J.unshift("desktop mode");V="Chrome Mobile";D=null;if(/Mac OS X/.test(E)){S="Apple";E="iOS 4.3+"}else{E=null}}}if(D&&D.indexOf((T=/[\d.]+$/.exec(E)))==0&&K.indexOf("/"+T+"-")>-1){E=s(E.replace(T,""))}if(P&&!/Avant|Nook/.test(V)&&(/Browser|Lunascape|Maxthon/.test(V)||/^(?:Adobe|Arora|Midori|Phantom|Rekonq|Rock|Sleipnir|Web)/.test(V)&&P[1])){(T=P[P.length-1])&&J.push(T)}if(J.length){J=["("+J.join("; ")+")"]}if(S&&C&&C.indexOf(S)<0){J.push("on "+S)}if(C){J.push((/^on /.test(J[J.length-1])?"":"on ")+C)}if(E){T=/ ([\d.+]+)$/.exec(E);E={architecture:32,family:T?E.replace(T[0],""):E,version:T?T[1]:null,toString:function(){var W=this.version;return this.family+(W?" "+W:"")+(this.architecture==64?" 64-bit":"")}}}if((T=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(U))&&!/\bi686\b/i.test(U)){if(E){E.architecture=64;E.family=E.family.replace(RegExp(" *"+T),"")}if(V&&(/WOW64/i.test(K)||(L&&/\w(?:86|32)$/.test(e.cpuClass||e.platform)))){J.unshift("32-bit")}}K||(K=null);return{version:V&&D&&(J.unshift(D),D),name:V&&(J.unshift(V),V),os:E?(V&&!(E==String(E).split(" ")[0]&&(E==V.split(" ")[0]||C))&&J.push(C?"("+E+")":"on "+E),E):{architecture:null,family:null,version:null,toString:function(){return"null"}},description:J.length?J.join(" "):K,layout:P&&P[0],manufacturer:S,prerelease:F,product:C,ua:K,parse:m,toString:R}}if(typeof define=="function"&&typeof define.amd=="object"&&define.amd){define(function(){return m()})}else{if(c&&!c.nodeType){v(m(),function(D,C){c[C]=D})}else{f.platform=m()}}}(this));
