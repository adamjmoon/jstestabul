/*!ui.browserscope.js*/
(function(e,t){function g(e,t,n){if(e=typeof e=="string"?x(e)[0]:e){if(typeof e.addEventListener!="undefined"){e.addEventListener(t,n,false)}else if(typeof e.attachEvent!="undefined"){e.attachEvent("on"+t,n)}}return e}function y(e,n,r){var i;n&&n.nodeType&&(r=n,n=0);r=r?r.ownerDocument||r:t;n||(n="");try{i=r.createElement("<"+e+' name="'+n+'">')}catch(s){(i=r.createElement(e)).name=n}return i}function b(e,t){var n=y("div",t);n.innerHTML="x<style>"+e+"</style>";return n.lastChild}function w(e,t){t||(t={});for(var n in t){e[n]=t[n]}return e}function E(e){e=x(e)[0];return e&&(e.textContent||e.innerText)||""}function S(e,t,n){n=t?t.ownerDocument||[t,t=0][0]:n;var r=y("script",n),i=t?t.nextSibling:x("script",n).pop();r.src=e;return(t||i).parentNode.insertBefore(r,i)}function x(e,n){var r=[];e||(e="");n=typeof n=="string"?x(n)[0]:n||t;if(e.nodeType){r=[e]}else if(n){f(e.split(","),function(e){f(/^#/.test(e)?[n.getElementById(e.slice(1))]:n.getElementsByTagName(e),function(e){r.push(e)})})}return r}function T(e,t,n){if(e=x(e)[0]){e.innerHTML=P(t,n)}return e}function N(e,t){var n=ui.browserscope,r=n.container;if(r){r.className="bs-rt-message";T(r,e,t)}}function C(){var e=ui.browserscope,t=[],n=frames[x("iframe",e.container)[0].name].document,r=x("text,textpath",n),i=e.uaClass,o=false;if(r.length){f(x("link,style"),function(e){try{var n=e.sheet||e.styleSheet;f(n.cssRules||n.rules,function(e){if((e.selectorText||e.cssText).indexOf("."+i)>-1){t.push(e.style&&e.style.cssText||/[^{}]*(?=})/.exec(e.cssText)||"")}})}catch(r){}});x("head",n)[0].appendChild(b("."+i+"{"+t.join(";")+"}",n));f(r,function(e){var t;if((e.string||E(e)).charAt(0)==s){if(e.string){e.className=i;t=e.nextSibling;e.parentNode.insertBefore(e.removeNode(),t)}else{e.setAttribute("class",i)}o=true}})}return o}function k(){var e=ui.browserscope,t=e.timings,r=n.timers,i=n.trash,s=t.cleanup*1e3;if(r.cleanup&&!ui.running){f(x("iframe,script"),function(e){var n=+(/^browserscope-\d+-(\d+)$/.exec(e.name)||0)[1]+u(s,t.timeout*1e3);if(new Date>n||/browserscope\.org|google\.com/.test(e.src)){i.appendChild(e);i.innerHTML=""}})}r.cleanup=setTimeout(k,s)}function L(e){var t,n,r=e;if(D(e)){r=v(e,L)}else if(e===Object(e)){n=e.constructor;r=n==Object?{}:(t=function(){},t.prototype=n.prototype,new t);c(e,function(e,t){r[t]=L(e)})}return r}function A(){var e=d(l(ui.benchmarks,function(e){return e.cycles&&isFinite(e.hz)}),"clone");var t;f(e.sort(function(e,t){e=e.stats;t=t.stats;return e.mean+e.moe>t.mean+t.moe?-1:1}),function(e){if(t&&!t.compare(e)){e.count=t.count;e.cycles=t.cycles;e.hz=t.hz;e.stats=w({},t.stats)}t=e});return m(e,function(e,t,n){var r=t.stats;e||(e={});n=F(t.name);e[n&&!p(e,n)?n:n+t.id]=o(1/(r.mean+r.moe));return e},null)}function O(e){var t=[];c(e,function(e){return!(D(e)&&(t=e))});return t}function M(e){var t=[],n={};c(e,function(e){return!(D(e)&&0 in e&&"type"in e[0]&&(t=e))});f(ui.benchmarks,function(e){var t=F(e.name);n[t&&!p(n,t)?t:t+e.id]=e.name});return f(t,function(e){var t=n[e.label];t&&(e.label=t)})}function _(e){var t,r=n.lastFilterBy,i=j(E(x("strong","#bs-ua")[0]),r),s=ui.browserscope.uaClass,o=[];c(e,function(e,n){return!(D(e)&&0 in e&&!("type"in e[0])&&(t=n,o=e))});if(o.length){o=e[t]=l(o,function(e){var t=O(e),n=t[0],o=t[1];if(n&&o&&o.f){delete n.p.className;if(i==j(n.f,r)){n.p.className=s}return true}})}return o}function D(e){return i.call(e)=="[object Array]"}function P(e,t){c(t,function(t,n){e=e.replace(RegExp("#\\{"+n+"\\}","g"),t)});return e}function H(e,t){function n(r){if(r||e()!==false){setTimeout(n,t*1e3)}}n(true)}function B(e){clearTimeout(n.timers[n.lastAction]);n.lastAction=e}function j(e,t){e||(e="");if(t=="all"){e=e.replace(/(\d+)[.0]+$/,"$1")}else if(t=="family"){e=e.replace(/[.\d\s]+$/,"")}else if(/minor|popular/.test(t)&&/\d+(?:\.[1-9])+$/.test(e)){e=e.replace(/(\d+\.[1-9])(\.[.\d]+$)/,"$1")}else{e=e.replace(/(\d+)(?:(\.[1-9]$)|(\.[.\d]+$))/,"$1$2")}return e}function F(e){return(e||"").replace(/[^a-z0-9]+/gi," ")}function I(t){function c(e){var t=a[u];if(!i){i=true;if(u==n.lastFilterBy){s.render({force:true,response:t||e})}else if(!t&&e&&!e.isError()){a[u]=e}}}t||(t={});var i,s=ui.browserscope,o=s.container,u=n.lastFilterBy=t.filterBy||n.lastFilterBy,a=n.responses,f=n.responses[u],l=e.google&&google.visualization;B("load");if(!o||!l||f){o&&c(f)}else if(!ui.running){n.timers.load=setTimeout(c,s.timings.timeout*1e3);N(s.texts.loading);(new l.Query("//www.browserscope.org/gviz_table_data?category=usertest_"+s.key+"&v="+r[u],{sendMethod:"scriptInjection"})).send(c)}}function q(){var e,r,i=t.body,s=ui.browserscope,o=s.key,u=s.timings,a="browserscope-"+n.counter++ +"-"+ +(new Date),f=A();B("post");if(o&&f&&s.postable&&!ui.running&&!/Simulator/i.test(Benchmark.platform)){r=y("iframe",a);i.insertBefore(r,i.firstChild);e=frames[a].document;r.style.display="none";s.snapshot=f;N(s.texts.post);e.write(P("#{doctype}<html><body><script>"+"with(parent.ui.browserscope){"+"var _bTestResults=snapshot,"+"_bC=function(){clearTimeout(_bT);parent.setTimeout(function(){purge();load()},#{refresh}*1e3)},"+"_bT=setTimeout(function(){_bC=function(){};render()},#{timeout}*1e3)"+"}</script>"+"<script src=//www.browserscope.org/user/beacon/#{key}?callback=_bC></script>"+"</body></html>",{doctype:/css/i.test(t.compatMode)?"<!doctype html>":"",key:o,refresh:u.refresh,timeout:u.timeout}));e.close()}else{s.load()}}function R(e){var t=n.responses;if(e){delete t[e]}else{c(t,function(e,n){delete t[n]})}}function U(t){function G(e){var r=n.lastAction;if(e||ui.running){n.timers[r]=setTimeout(G,d.timings.retry*1e3)}else{d[r].apply(d,r=="render"?[t]:[])}}t||(t={});var r,i,o,l,c,p,d=ui.browserscope,v=d.container,m=n.responses,g=e.google&&google.visualization,y=n.lastChart,b=n.lastChart=t.chart||y,w=n.lastFilterBy,E=n.lastFilterBy=t.filterBy||w,S=m[E],x=m[E]="response"in t?(x=t.response)&&!x.isError()&&x:S,T="100%",k=80,A=13,D="auto",P="operations per second (higher is better)",j=48,F=240,q="top",R=0,U=20,z=0,W=480,X=v&&v.offsetWidth||948,V="",$=50,J="",K=48,Q=X;B(x?"render":n.lastAction);if(!v||g&&(E!=w||!t.force&&b==y&&x==S)){v&&E!=w&&I(t)}else if(!x||!g){!x&&g&&N(d.texts.error);G(true)}else if(!ui.running){v.className="";o=L(x.getDataTable());l=M(o);p=_(o);c=p.length;b=b.charAt(0).toUpperCase()+b.slice(1).toLowerCase();if(b!="Table"){l.pop();f(p,function(e){f(O(e),function(e,t,n){var r=n.length-1;if(/^[\d.,]+$/.test(e.f)){e.v=+e.f.replace(/,/g,"");e.f+=" ops/sec";z=u(z,e.v)}else if(e.f){e.f+=b=="Pie"?"":" ("+(n[r].v||1)+")";R=a(U,u(R,e.f.length))}if(b=="Pie"){if(t==r){n[1].f=h(n[1].v)+" total ops/sec"}else if(t>1&&typeof e.v=="number"){n[1].v+=e.v}}if(e.p&&e.p.className){e.f=s+e.f;H(function(){return!C()},.01)}})});if(b=="Bar"){D=u(W,$+c*k);F=R*(A/1.6)+10;T=100-(F+50)/Q*100+"%"}else{J=[P,P=J][0];D=W;if(b=="Pie"){q="right";V="Total operations per second by browser (higher is better)"}else{j=28;F=K+h(z).length*(A/1.6)+13;i=R*(A/2)+26;Q=u(X,F+c*i)}}r=100-(j+A+$+8)/D*100+"%";b+="Chart"}if(c&&g[b]){(new g[b](v)).draw(o,{fontSize:A,is3D:true,legend:q,height:D,title:V,width:Q,chartArea:{height:r,left:F,top:$,width:T},hAxis:{title:P},vAxis:{title:J}})}else{N(d.texts.empty)}}}var n={counter:0,lastAction:"load",lastChart:"bar",lastFilterBy:"all",responses:{},timers:{},trash:y("div")},r={all:3,desktop:"top-d",family:0,major:1,minor:2,mobile:"top-m",popular:"top",prerelease:"top-d-e"},i={}.toString,s="\u2028",o=Math.floor,u=Math.max,a=Math.min,f=Benchmark.each,l=Benchmark.filter,c=Benchmark.forOwn,h=Benchmark.formatNumber,p=Benchmark.hasKey,d=Benchmark.invoke,v=Benchmark.map,m=Benchmark.reduce;ui.browserscope={key:"113842991729471998627",postable:true,selector:"#bs-results",uaClass:"rt-ua-cur",timings:{cleanup:10,refresh:3,retry:5,timeout:10},texts:{empty:"No data available",error:"The get/post request has failed :(",loading:"Loading cumulative results data…",post:"Posting results snapshot…",wait:"Benchmarks running. Please wait…"},load:I,post:q,purge:R,render:U};g(e,"load",function(){var e=ui.browserscope,t=e.key,n=t&&x(e.selector)[0];if(n){T(n,"<h1 id=bs-logo><a href=//www.browserscope.org/user/tests/table/#{key}>"+"<span>Browserscope</span></a></h1>"+"<div class=bs-rt><div id=bs-chart></div></div>",{key:t});e.container=x("#bs-chart")[0];S("//www.browserscope.org/ua?o=js",e.container).id="bs-ua-script";S("//www.google.com/jsapi?autoload="+encodeURIComponent("{"+"modules:[{"+'name:"visualization",'+"version:1,"+'packages:["corechart","table"],'+"callback:ui.browserscope.load"+"}]"+"}"));k()}});ui.addListener("start",function(){N(ui.browserscope.texts.wait)}).addListener("abort",function(){ui.browserscope.render({force:true})})})(this,document);